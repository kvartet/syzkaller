include <Source/os.h>


OSTmrCreate(p_tmr ptr[out, OS_TMR], p_name ptr[in, CPU_CHAR], dly OS_TICK, period OS_TICK, opt flags[cret_opt_flags], p_callback OS_TMR_CALLBACK_PTR, p_callback_arg ptr[void], p_err ptr[out, const[OS_ERR_NONE, int16]])
OSTmrDel(p_tmr ptr[in, OS_TMR], p_err ptr[out, const[OS_ERR_NONE, int16]]) CPU_BOOLEAN
OSTmrRemainGet(p_tmr ptr[in, OS_TMR], p_err ptr[out, const[OS_ERR_NONE, int16]]) OS_TICK
OSTmrSet(p_tmr ptr[in, OS_TMR], dly OS_TICK, period OS_TICK, p_callback OS_TMR_CALLBACK_PTR, p_callback_arg ptr[void], p_err ptr[out, const[OS_ERR_NONE, int16]])
OSTmrStart(p_tmr ptr[in, OS_TMR], p_err ptr[out, const[OS_ERR_NONE, int16]]) CPU_BOOLEAN
OSTmrStateGet(p_tmr ptr[in, OS_TMR], p_err ptr[out, const[OS_ERR_NONE, int16]]) OS_STATE
OSTmrStop(p_tmr ptr[out, OS_TMR], opt flags[stop_opt_flags], p_callback_arg ptr[void], p_err ptr[out, const[OS_ERR_NONE, int16]]) CPU_BOOLEAN


cret_opt_flags = OS_OPT_TMR_ONE_SHOT, OS_OPT_TMR_PERIODIC
stop_opt_flags = OS_OPT_TMR_NONE, OS_OPT_TMR_CALLBACK, OS_OPT_TMR_CALLBACK_ARG


type CPU_CHAR       int8
type OS_STATE       int8
type CPU_BOOLEAN    int8
type OS_OPT         int16
type OS_TICK        int32
type OS_OBJ_TYPE    int32
type OS_TMR_CALLBACK_PTR ptr[int64]


OS_TMR {
    Type            OS_OBJ_TYPE
    NamePtr         ptr[CPU_CHAR]
    CallbackPtr     OS_TMR_CALLBACK_PTR
    CallbackPtrArg  ptr[void]
    NextPtr         ptr[OS_TMR]
    PrevPtr         ptr[OS_TMR]
    Remain          OS_TICK
    Dly             OS_TICK
    Period          OS_TICK
    Opt             OS_OPT
    State           OS_STATE
    DbgPrevPtr      OS_TMR
    DbgNextPtr      OS_TMR
}